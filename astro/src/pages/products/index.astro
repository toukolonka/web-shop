---
import Layout from '../../layouts/Layout.astro';
import ProductList from '../../components/ProductList.jsx';

export const prerender = true;

const response = await fetch(`http://${import.meta.env.SERVER_HOST_NAME}:8080/api/products/all`);
const data = await response.json();
const products = data.sort((p1, p2) => p1.price - p2.price);
---

<Layout>
  <ProductList
    client:load
    products={products}
  />
</Layout>